<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Movies</title>
<link rel="stylesheet" th:href="@{/css/reset.css}">
<th:block th:insert="~{common/header :: header-styles}" />
<link rel="stylesheet" th:href="@{/css/admin/movie/admin-movie-list.css}">
</head>
<body>
	<header th:replace="~{common/header :: cinema-header}"></header>

	<div class="movie-grid">
		<div>
			<h1>List of movies</h1>
			<a th:href="@{/admin/movie/create}">Create Movie</a>
		</div>
		<div th:each="movie : ${moviePage.content}" class="movie-card">
			<a th:href="@{/admin/movie/{id}(id=${movie.id})}"> <img
				th:src="${movie.posterImagePath != null} ? 
                  @{${movie.posterImagePath}} : 
                  @{/images/default-poster.jpg}"
				alt="Movie poster" class="movie-poster">
			</a>

			<div class="movie-info">
				<h3 th:text="${movie.title}"></h3>
				<span class="age-rating"
					th:text="${movie.ageRating.getDisplayName()}"
					th:title="${movie.ageRating.getDescription()}"></span>
			</div>

			<div class="movie-actions">
				<a th:href="@{/admin/movie/edit/{slug}(slug=${movie.slug})}"
					class="edit-btn"> <i class="fas fa-edit"></i> Edit
				</a>
				<form th:action="@{/admin/movie/delete/{id}(id=${movie.id})}"
					method="post">
					<button type="submit" class="delete-btn"
						onclick="return confirm('Are you sure you want to delete this movie?');">
						<i class="fas fa-trash-alt"></i> Delete
					</button>
				</form>
			</div>
		</div>

		<div class="pagination">
			<a th:if="${currentPage > 0}"
				th:href="@{/admin/movie(page=${currentPage - 1}, size=${moviePage.size})}">&laquo;
				Prev</a>

			<span th:each="i : ${#numbers.sequence(0, totalPages - 1)}"> <a
				th:href="@{/admin/movie(page=${i}, size=${moviePage.size})}"
				th:text="${i + 1}"
				th:classappend="${i == currentPage} ? 'active-page' : ''"></a>
			</span>

			<a th:if="${currentPage < totalPages - 1}"
				th:href="@{/admin/movie(page=${currentPage + 1}, size=${moviePage.size})}">Next
				&raquo;</a>
		</div>
	</div>
</body>
</html>