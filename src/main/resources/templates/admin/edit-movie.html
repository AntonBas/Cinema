<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Edit Movie</title>
    <link rel="stylesheet" th:href="@{/css/reset.css}">
    <th:block th:insert="~{common/header :: header-styles}" />
    <link rel="stylesheet" th:href="@{/css/admin/create-movie.css}">
</head>
<body>
    <header th:replace="~{common/header :: cinema-header}"></header>

    <div class="admin-container">
        <form th:action="@{/admin/movie/edit/{id}(id=${movie.id})}" 
              th:object="${movie}" method="post" enctype="multipart/form-data">
            
            <div class="form-section">
                <h3>Basic Information</h3>

                <div class="form-group">
                    <label for="title" class="required">Title</label>
                    <input type="text" id="title" th:field="*{title}" required>
                </div>

                <div class="form-group">
                    <label for="description" class="required">Description</label>
                    <textarea id="description" th:field="*{description}" required></textarea>
                </div>

                <div class="form-group">
                    <label for="production" class="required">Production</label>
                    <input type="text" id="production" th:field="*{production}" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="director" class="required">Director</label>
                        <input type="text" id="director" th:field="*{director}" required>
                    </div>

                    <div class="form-group">
                        <label for="genre" class="required">Genre</label>
                        <input type="text" id="genre" th:field="*{genre}" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="screenwriter" class="required">Screenwriter</label>
                        <input type="text" id="screenwriter" th:field="*{screenwriter}" required>
                    </div>

                    <div class="form-group">
                        <label for="releaseYear" class="required">Release Year</label>
                        <input type="number" id="releaseYear" th:field="*{releaseYear}" 
                               min="1900" max="2100" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="main_cast" class="required">Main Cast</label>
                    <textarea id="main_cast" th:field="*{mainCast}" required></textarea>
                </div>
            </div>

            <div class="form-section">
                <h3>Technical Details</h3>

                <div class="form-row">
                    <div class="form-group">
                        <label for="durationMinutes" class="required">Duration (minutes)</label>
                        <input type="number" id="durationMinutes" th:field="*{durationMinutes}" 
                               min="1" required>
                    </div>

                    <div class="form-group">
                        <label for="ageRating" class="required">Age Rating</label>
                        <select id="ageRating" th:field="*{ageRating}" required>
                            <option th:each="rating : ${allAgeRatings}" 
                                    th:value="${rating}" 
                                    th:text="${rating}"></option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="releaseDate" class="required">Release Date</label>
                        <input type="date" id="releaseDate" th:field="*{releaseDate}" required>
                    </div>

                    <div class="form-group">
                        <label for="endShowingDate" class="required">End Showing Date</label>
                        <input type="date" id="endShowingDate" th:field="*{endShowingDate}" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="status" class="required">Status</label>
                    <select id="status" th:field="*{status}" required>
                        <option th:each="status : ${allMovieStatuses}" 
                                th:value="${status}" 
                                th:text="${status}"></option>
                    </select>
                </div>
            </div>

            <div class="form-section">
                <h3>Poster Image</h3>
                <div class="form-group">
                    <label>Current Poster</label>
                    <img th:if="${movie.posterImagePath}" 
                         th:src="@{${movie.posterImagePath}}" 
                         class="current-poster">
                    <p th:unless="${movie.posterImagePath}">No poster uploaded</p>
                    
                    <label for="posterFile">Upload New Poster</label>
                    <input type="file" id="posterFile" name="posterFile" accept="image/*">
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-primary">Update Movie</button>
                <a th:href="@{/admin/movies}" class="btn-cancel">Cancel</a>
            </div>
        </form>
    </div>
</body>
</html>